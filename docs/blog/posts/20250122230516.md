---
comments: true
date: 2025-01-22
updated: 2025-01-22
title: Setting Up Hector SLAM with ROS 1 for a Roboclaw-Based Rover
description: Learn how to set up and run Hector SLAM on a ROS 1 rover, including configuring the Roboclaw node and LIDAR integration for mapping and navigation.
categories:
  - Robotics
tags:
  - ROS
  - Hector SLAM
  - Roboclaw
  - LIDAR
  - Autonomous Navigation
  - Ubuntu
author: harmindersinghnijjar
---

## Setting Up Hector SLAM with ROS 1 for a Roboclaw-Based Rover

This guide details the steps to configure and use Hector SLAM with a Roboclaw-based ROS 1 robot. We’ll cover LIDAR integration, transform configuration, and how to set RViz for successful mapping and navigation.

---

## Prerequisites

Ensure the following are set up on your system:

1. **ROS Installed**: ROS Melodic or a compatible version is installed.
2. **Workspace Prepared**: A catkin workspace (e.g., `~/armpi_pro`) is created, built, and sourced.
3. **Hector SLAM Package**:
   - Installed and located in your workspace under `src/hector_slam`.
   - Ensure `hector_mapping` and `hector_slam_launch` are available.
4. **LIDAR Sensor**:
   - Configured and publishing scan data to `/scan`.
5. **Roboclaw Node**:
   - Operational, publishing odometry to `/odom`.

---

## Steps to Set Up Hector SLAM

### 1. **Launch ROS Core**

Open a terminal and start the ROS core:

```bash
roscore
```

This is required for all other nodes to communicate.

---

### 2. **Launch the LIDAR and RoboClaw Nodes**

To enable LIDAR data for mapping, launch the LIDAR node in a new terminal:

```bash
roslaunch ldlidar_stl_ros ld19.launch
```

This ensures the LIDAR sensor is active and publishing data to the `/scan` topic, which is necessary for Hector SLAM to create a map.

In a new terminal, navigate to your workspace and launch the Roboclaw node:

```bash
roslaunch roboclaw_node roboclaw.launch
```

This node handles motor control, publishing odometry, and subscribing to velocity commands (`/cmd_vel`).

---
---

### 3. **Configure and Launch Hector Mapping**

In your workspace, navigate to the Hector SLAM launch folder:

```bash
cd ~/armpi_pro/src/hector_slam/hector_slam_launch/launch
```

Use the `tutorial.launch` file as a base for running Hector SLAM. Modify the following parameters in the launch file to match your setup:

```xml
<launch>
  <node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen">
    <param name="pub_map_odom_transform" value="true"/>
    <param name="map_frame" value="map"/>
    <param name="base_frame" value="base_link"/>
    <param name="odom_frame" value="odom"/>
  </node>
</launch>
```

Run the launch file:

```bash
roslaunch hector_slam_launch mapping_with_odom.launch
```

---

### 4. **Adjust RViz Configuration**

To visualize the mapping process:

1. Start RViz:
   ```bash
   rosrun rviz rviz
   ```

2. Set the **Fixed Frame** to `scanmatcher_frame`:
   - Navigate to `Global Options` in RViz.
   - Set `Fixed Frame` to `scanmatcher_frame`.

3. Add relevant displays:
   - **Map**: Subscribe to `/map` for live updates.
   - **LaserScan**: Subscribe to `/scan` to visualize LIDAR data.
   - **TF**: Check the frame hierarchy and transformations.

---

### 5. **Launch the Roboclaw Node**

Start the Roboclaw node to handle motor control and odometry:

```bash
roslaunch roboclaw_node roboclaw.launch
```

This node should publish odometry data to the `/odom` topic, which Hector SLAM uses.

---

### 6. **Run the rover**

Now that the mapping and motor control nodes are active:

- Drive the rover manually or programmatically.
- Watch the map being built in RViz.
- Ensure the rover avoids obstacles and updates the map in real-time.

---

## Key Adjustments Made

Here’s a summary of the adjustments we made to configure Hector SLAM:

1. Set **Fixed Frame** in RViz to `scanmatcher_frame`.
2. Modified the Hector SLAM launch file to include:
   - `pub_map_odom_transform` set to `true`.
   - Correct frame names (`map`, `odom`, `base_link`).
3. Verified LIDAR publishing to `/scan` using `ld19.launch`.
4. Ensured odometry data was published to `/odom` by the Roboclaw node.

---

## Troubleshooting

### Error: Transform Lookup Failed
If you see errors like "Lookup would require extrapolation into the future," check the following:
- Ensure the system clocks are synchronized using `ntp` or `chrony`.
- Verify all topics (`/scan`, `/odom`) have valid and synchronized timestamps.

### LIDAR Not Publishing
Run:
```bash
rostopic echo /scan
```
If no data appears, ensure the LIDAR launch file is correctly configured and the sensor is operational.

---

## Conclusion

By following these steps, you’ve successfully set up Hector SLAM on a Roboclaw-based ROS 1 rover. With LIDAR and odometry data, your rover can build a 2D map of its environment, enabling autonomous navigation and enhanced spatial awareness.

Feel free to experiment with SLAM parameters and refine your rover’s capabilities for your specific use case.