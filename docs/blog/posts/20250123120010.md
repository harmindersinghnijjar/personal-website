---
comments: true  
date: 2025-01-23  
updated: 2025-01-23  
title: Setting Up and Running D500 LiDAR Kit's STL-19P LIDAR Node for Autonomous Robotics on ROS 1 and ROS 2  
description: Learn how to set up and run a LIDAR node on ROS 1 and adapt it for ROS 2, including configurations and launch file setups.  
categories:  
  - Robotics  
tags:  
  - ROS 1  
  - ROS 2  
  - LIDAR  
  - Autonomous Vehicles  
  - Ubuntu  
author: harmindersinghnijjar  

---

# Setting Up and Running D500 LiDAR Kit's STL-19P LIDAR Node for Autonomous Robotics on ROS 1 and ROS 2

This guide walks you through the setup of **ldlidar_stl_ros** for the STL-19P LIDAR sensor in **ROS 1** and the process to adapt it for **ROS 2 Jazzy or Galactic**. By the end of this article, you'll be able to configure, launch, and visualize LIDAR data in both environments.

---

## Prerequisites

Before we start, ensure the following are set up:

### ROS 1 (Melodic or Noetic):
1. **Workspace Preparation**: Have your ROS workspace (e.g., `~/armpi_pro`) built and sourced.
2. **Package**: Install the **ldlidar_stl_ros** package. If not already installed, you can clone it:
   ```bash
   cd ~/armpi_pro/src
   git clone https://github.com/ldrobotSensorTeam/ldlidar_stl_ros.git
   ```
3. **Dependencies**: Install any missing dependencies:
   ```bash
   cd ~/armpi_pro
   rosdep install --from-paths src --ignore-src -r -y
   catkin_make
   source devel/setup.bash
   ```

---

### ROS 2 (Foxy, Galactic, or Jazzy):
1. **ROS 2 Installed**: Install ROS 2 and set up your workspace:
   ```bash
   mkdir -p ~/ros2_ws/src
   cd ~/ros2_ws
   colcon build
   source install/setup.bash
   ```
2. **Package Clone**: Clone the `ldlidar_stl_ros` repo and switch to a ROS 2 compatible branch:
   ```bash
   cd ~/ros2_ws/src
   git clone https://github.com/ldrobotSensorTeam/ldlidar_stl_ros.git -b ros2
   ```
3. **Dependencies**: Install dependencies for ROS 2:
   ```bash
   cd ~/ros2_ws
   rosdep install --from-paths src --ignore-src -r -y
   colcon build
   source install/setup.bash
   ```

---

## Configuration

### ROS 1 Configuration:
1. **Locate the Launch File**: The main launch file is typically:
   ```bash
   ~/armpi_pro/src/ldlidar_stl_ros/launch/ld19.launch
   ```
   This file defines the node, device port (e.g., `/dev/ttyUSB0`), and frame settings.
   
2. **Modify the Launch File** (Optional): Ensure the `serial_port` matches your LIDAR connection (e.g., `/dev/ttyUSB0`):
   ```xml
   <launch>
       <node name="ldlidar" pkg="ldlidar_stl_ros" type="ld19" output="screen">
           <param name="serial_port" value="/dev/ttyUSB0" />
           <param name="frame_id" value="laser_frame" />
       </node>
   </launch>
   ```

### ROS 2 Configuration:
1. **ROS 2 Launch File**: Modify or create a launch file under:
   ```bash
   ~/ros2_ws/src/ldlidar_stl_ros/launch/ld19_launch.py
   ```
2. **Example Python Launch File**:
   ```python
   from launch import LaunchDescription
   from launch_ros.actions import Node

   def generate_launch_description():
       return LaunchDescription([
           Node(
               package='ldlidar_stl_ros',
               executable='ldlidar_stl_node',
               name='ldlidar_stl',
               parameters=[{'serial_port': '/dev/ttyUSB0', 'frame_id': 'laser_frame'}],
               output='screen'
           )
       ])
   ```

---

## Running the Nodes

### ROS 1:
1. **Start the Core**:
   ```bash
   roscore
   ```
2. **Launch the LIDAR Node**:
   ```bash
   roslaunch ldlidar_stl_ros ld19.launch
   ```
3. **View the Data in Rviz**:
   ```bash
   rosrun rviz rviz
   ```
   Add a "LaserScan" display and set the topic to `/scan`.

---

### ROS 2:
1. **Launch the Node**:
   ```bash
   ros2 launch ldlidar_stl_ros ld19_launch.py
   ```
2. **View the Data in Rviz**:
   ```bash
   rviz2
   ```
   Add a "LaserScan" display and set the topic to `/scan`.

---

## Troubleshooting

1. **Device Not Found**:
   - Verify the LIDAR connection using:
     ```bash
     ls /dev/ttyUSB*
     ```
   - Update the launch file or parameters with the correct port.

2. **Missing Dependencies**:
   - For ROS 1:
     ```bash
     rosdep install --from-paths src --ignore-src -r -y
     ```
   - For ROS 2:
     ```bash
     rosdep install --from-paths src --ignore-src -r -y
     colcon build
     ```

3. **No Data in Rviz**:
   - Check if `/scan` is being published:
     ```bash
     rostopic echo /scan  # ROS 1
     ros2 topic echo /scan  # ROS 2
     ```

---

## Conclusion

With these steps, you can set up and run the **ldlidar_stl_ros** package for both ROS 1 and ROS 2. Whether you're using a legacy system or the latest ROS version, this guide ensures a smooth integration of your LIDAR sensor into your robotics project.

--- 