---
comments: true  
date: 2025-01-23  
updated: 2025-01-23  
title: Transitioning the `roboclaw_ros` Node from ROS 1 to ROS 2 for Frata
description: A step-by-step guide to migrating the `roboclaw_ros` node from ROS 1 to ROS 2, ensuring smooth integration and operation in Frata's robotic systems.  
categories: 
- Robotics
tags:
- ROS
- Roboclaw
- ROS 2  
author: harmindersinghnijjar 

---

## Introduction

At Frata, we've been using the `roboclaw_ros` node in our ROS 1 system to control our skid-steer robotic platforms. With the shift to ROS 2, we're migrating this critical node to leverage ROS 2's enhanced features like DDS-based communication and better real-time performance. This guide outlines the migration process for the `roboclaw_ros` node from ROS 1 to ROS 2, including updated parameters and launch files.

---

## Prerequisites

Before proceeding, ensure you have:

1. **ROS 2 Installed**: ROS 2 Humble, Galactic, or Rolling distributions are supported.  
2. **Workspace Prepared**: A ROS 2 workspace (`~/frata_ws`) initialized and sourced.  
3. **Hardware Setup**:
   - A Roboclaw motor controller connected to `/dev/ttyACM0`.  
   - Encoders configured for your robot’s specific dimensions.  

4. **Dependencies Installed**:
   - `roboclaw_driver` library.  
   - ROS 2 Python client library (`rclpy`).  
   - Navigation and visualization tools like `rviz2`.  

---

## Migration Steps

### 1. Clone the Updated Repository

Clone the ROS 2-compatible version of `roboclaw_ros`:

```bash
cd ~/frata_ws/src
git clone https://github.com/sonyccd/roboclaw_ros
```

---

### 2. Update Parameters for Frata’s System

Navigate to the `config` folder and create a `roboclaw_config.yaml` file with the following updated parameters:

```yaml
roboclaw:
  dev: "/dev/ttyACM0"
  baud: 115200
  address: 128  # 0x80
  max_speed: 2.0
  ticks_per_meter: 4540
  base_width: 0.108
```

---

### 3. Update the Launch File

Create a ROS 2 launch file in `roboclaw_ros/launch/roboclaw_node.launch.py`:

```python
from launch import LaunchDescription
from launch_ros.actions import Node

def generate_launch_description():
    return LaunchDescription([
        Node(
            package='roboclaw_ros',
            executable='roboclaw_node',
            name='roboclaw_node',
            output='screen',
            parameters=[
                {'dev': '/dev/ttyACM0'},
                {'baud': 115200},
                {'address': 128},
                {'max_speed': 2.0},
                {'ticks_per_meter': 4540},
                {'base_width': 0.108}
            ]
        )
    ])
```

---

### 4. Build the Workspace

After configuring the parameters and launch file, build your workspace:

```bash
cd ~/frata_ws
colcon build
source install/setup.bash
```

---

### 5. Running the Node

To start the `roboclaw_ros` node in ROS 2:

1. Open a terminal and start ROS 2 core:
   ```bash
   ros2 launch roboclaw_ros roboclaw_node.launch.py
   ```

2. Check the node's health:
   ```bash
   ros2 topic list
   ```

You should see topics like `/cmd_vel` and `/odom` listed.

---

## Testing the Node

To verify that the node works as expected:

1. Publish velocity commands to `/cmd_vel`:
   ```bash
   ros2 topic pub /cmd_vel geometry_msgs/msg/Twist "{linear: {x: 0.5, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.1}}"
   ```

2. Observe the robot moving and verify odometry on `/odom`:
   ```bash
   ros2 topic echo /odom
   ```

---

## Transitioning to ROS 2 Navigation Stack

If integrating with ROS 2 Navigation:

1. Launch `slam_toolbox` for mapping:
   ```bash
   ros2 launch slam_toolbox online_async_launch.py
   ```

2. Visualize the map in `rviz2`:
   ```bash
   rviz2
   ```

3. Use `nav2` for autonomous navigation:
   ```bash
   ros2 launch nav2_bringup navigation_launch.py
   ```

---

## Benefits of Migration to ROS 2

1. **Enhanced Real-Time Performance**: DDS-based middleware ensures lower latency and higher reliability.
2. **Scalability**: Easier to integrate additional nodes and sensors.
3. **Future-Proofing**: Stay updated with the latest developments in the ROS ecosystem.

---

## Conclusion

Migrating the `roboclaw_ros` node to ROS 2 positions Frata’s robotic systems for better performance and scalability. By leveraging ROS 2’s features, we ensure our systems are robust, future-ready, and capable of handling complex navigation and control tasks.