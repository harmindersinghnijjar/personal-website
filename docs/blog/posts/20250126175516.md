---
comments: true  
date: 2025-01-26  
updated: 2025-01-26  
title: Mastering Docker and ROS for Roboclaw With Key Tips and Workflows
description: A comprehensive guide to efficiently managing Docker containers and ROS nodes for Roboclaw integration, including tips for saving containers, opening new terminals, and debugging common issues.  
categories: 
- Robotics
tags:
- ROS
- Docker
- Roboclaw
- ROS Noetic 
- ROS Jazzy 
author: harmindersinghnijjar  
---

### Introduction

When working on robotics projects with Docker and ROS, managing your containers and ensuring proper configurations can get challenging. This blog consolidates the most critical reminders and steps to help streamline your workflow. We'll focus on managing Docker containers, integrating Bluetooth, opening required ports, and running your ROS nodes smoothly.

---

### Key Topics Covered
1. Saving Docker containers for future use.
2. Opening a new terminal in an existing container.
3. Running Docker containers with Bluetooth and port access.
4. Proper workspace setup for ROS in Docker.
5. Debugging common issues during ROS and Docker integration.

---

### 1. Saving Docker Containers

One of the most important tasks is saving a Docker container after installing dependencies or configuring it for ROS.

#### Steps to Save a Container as an Image:
1. Stop the container:
   ```bash
   sudo docker stop <container_name>
   ```
2. Commit the container as a new image:
   ```bash
   sudo docker commit <container_id> <new_image_name>
   ```
3. Verify the new image:
   ```bash
   sudo docker images
   ```

Example:
```bash
sudo docker commit d3aee02fa93e ros_noetic_saved
```

#### Why Save Containers?
- It ensures you donâ€™t lose your work if the container is stopped or deleted.
- You can easily spin up new containers with the same setup.

---

### 2. Opening a New Terminal in an Existing Container

When running a long-term ROS process, you may need to open another terminal in the same container for additional commands.

#### Steps to Open a New Terminal:
1. List all running containers:
   ```bash
   sudo docker ps
   ```
2. Attach a new shell to the container:
   ```bash
   sudo docker exec -it <container_name> /bin/bash
   ```

Example:
```bash
sudo docker exec -it ros_noetic_saved bash
```

#### Why Use This?
- It lets you manage multiple ROS nodes or debug processes within the same environment.

---

### 3. Running Docker Containers with Bluetooth and Port Access

For integrating an Xbox controller or other Bluetooth devices, Docker must allow Bluetooth and open specific ports.

#### Steps to Run a Container with Bluetooth:
1. Stop any conflicting containers:
   ```bash
   sudo docker stop <container_name>
   sudo docker rm <container_name>
   ```
2. Run the container with Bluetooth and ports open:
   ```bash
   sudo docker run -it --name <new_container_name> \
       --net=host \
       --privileged \
       --device=/dev/input/js0:/dev/input/js0 \
       --device=/dev/input/event0:/dev/input/event0 \
       -v /var/run/dbus:/var/run/dbus \
       -v /tmp/.X11-unix:/tmp/.X11-unix \
       <saved_image_name>
   ```

Example:
```bash
sudo docker run -it --name ros_noetic_bluetooth \
    --net=host \
    --privileged \
    --device=/dev/input/js0:/dev/input/js0 \
    --device=/dev/input/event0:/dev/input/event0 \
    -v /var/run/dbus:/var/run/dbus \
    -v /tmp/.X11-unix:/tmp/.X11-unix \
    ros_noetic_saved
```

#### Why Use These Flags?
- `--net=host`: Ensures seamless communication over the network.
- `--privileged`: Grants the container full access to host devices.
- `--device`: Links specific devices (e.g., Xbox controller or other peripherals).
- `-v`: Mounts necessary host directories.

---

### 4. Proper ROS Workspace Setup in Docker

#### Steps to Initialize and Persist a Workspace:
1. Create a workspace on the host machine:
   ```bash
   mkdir -p ~/ros_noetic_ws/src
   ```
2. Mount it in the container:
   ```bash
   sudo docker run -it --name <container_name> \
       -v ~/ros_noetic_ws:/root/ros_noetic_ws \
       <base_image>
   ```
3. Inside the container, initialize the workspace:
   ```bash
   cd /root/ros_noetic_ws
   catkin_make
   ```

#### Why Mount the Workspace?
- It allows you to edit files outside the container while ensuring changes reflect inside the container.

---

### 5. Running ROS Nodes and Debugging

#### Starting `roscore` in the Same Container
1. Open a new terminal in the container:
   ```bash
   sudo docker exec -it <container_name> /bin/bash
   ```
2. Start `roscore`:
   ```bash
   roscore
   ```

#### Running a ROS Node
1. Source the workspace:
   ```bash
   source ~/ros_noetic_ws/devel/setup.bash
   ```
2. Run the node:
   ```bash
   rosrun <package_name> <node_name>
   ```

Example:
```bash
rosrun roboclaw_node xbox_teleop_odom.py
```

---

### 6. Debugging Common Issues

1. Master Not Found (`roscore` Issue):
   - Ensure `roscore` is running in the same container.

2. Device Not Found:
   - Verify the device mapping:
     ```bash
     ls /dev/input/js0
     ```
   - Check permissions or add the correct `--device` flag when running the container.

3. ROS Package Path Issues:
   - Set the `ROS_PACKAGE_PATH`:
     ```bash
     export ROS_PACKAGE_PATH=/root/ros_noetic_ws/src:$ROS_PACKAGE_PATH
     ```

---

### Conclusion

This blog compiles essential Docker and ROS techniques, ensuring efficient development with `roboclaw_ros`. Following these practices guarantees a smoother workflow, better debugging, and robust integration of peripherals like Xbox controllers.

For robotics enthusiasts, mastering these steps empowers you to focus on innovation without being hindered by setup challenges.

--- 

**Happy Robotics!** ðŸš€