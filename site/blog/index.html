
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://harminder.dev/blog/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="category/art/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.45">
    
    
      
        <title>Blog - Harminder Singh Nijjar</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-X0B1C5DM9K"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-X0B1C5DM9K",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-X0B1C5DM9K",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Blog - Harminder Singh Nijjar" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://harminder.dev/assets/images/social/blog/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://harminder.dev/blog/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Blog - Harminder Singh Nijjar" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://harminder.dev/assets/images/social/blog/index.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#blog" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Harminder Singh Nijjar" class="md-header__button md-logo" aria-label="Harminder Singh Nijjar" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Harminder Singh Nijjar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Blog
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Blog

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Harminder Singh Nijjar" class="md-nav__button md-logo" aria-label="Harminder Singh Nijjar" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Harminder Singh Nijjar
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    Blog
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="archive/2025/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Archive
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="category/art/" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    Categories
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge" class="md-nav__link">
    <span class="md-ellipsis">
      Sending Commands from ROS 2 to RoboClaw in ROS 1 with a ROS Bridge
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automating-the-ros-1-ros-2-bridge-for-roboclaw" class="md-nav__link">
    <span class="md-ellipsis">
      Automating the ROS 1-ROS 2 Bridge for RoboClaw
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004" class="md-nav__link">
    <span class="md-ellipsis">
      Running ROS 1 Noetic and ROS 2 Foxy From Source on Ubuntu 20.04
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#efficient-docker-management-for-robotics" class="md-nav__link">
    <span class="md-ellipsis">
      Efficient Docker Management for Robotics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows" class="md-nav__link">
    <span class="md-ellipsis">
      Mastering Docker and ROS for Roboclaw With Key Tips and Workflows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Up and Running D500 LiDAR Kit's STL-19P on ROS 2 Jazzy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Up the roboclaw_ros Node with ROS Noetic in Docker
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Up and Running a Roboclaw-Based ROS Node with Obstacle Avoidance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Up Hector SLAM with ROS 1 for a Roboclaw-Based Rover
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bypassing-cloudflare-with-selenium-and-undetected-chromedriver" class="md-nav__link">
    <span class="md-ellipsis">
      Bypassing Cloudflare with Selenium and Undetected-Chromedriver
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="blog">Blog</h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-30 00:00:00+00:00">January 30, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/">Sending Commands from ROS 2 to RoboClaw in ROS 1 with a ROS Bridge</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#introduction"><strong>Introduction</strong></a></h3>
<p>With ROS 1 Noetic and ROS 2 Foxy running on the same system, it’s possible to bridge topics between them. This allows controlling a <strong>RoboClaw motor controller</strong> (running on ROS 1) using <strong>ROS 2 commands</strong>. This guide walks you through setting up the <strong>ros1_bridge</strong> and sending commands to the RoboClaw-controlled robot from ROS 2.</p>
<hr />
<h3 id="key-topics-covered"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#key-topics-covered"><strong>Key Topics Covered</strong></a></h3>
<ul>
<li>Running the RoboClaw node in ROS 1  </li>
<li>Setting up the ROS 1-ROS 2 bridge  </li>
<li>Sending velocity commands from ROS 2  </li>
<li>Debugging issues  </li>
</ul>
<hr />
<h3 id="1-launching-the-roboclaw-node-in-ros-1"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#1-launching-the-roboclaw-node-in-ros-1"><strong>1. Launching the RoboClaw Node in ROS 1</strong></a></h3>
<p>Make sure ROS 1 Noetic is <strong>sourced</strong> and start the RoboClaw node:  </p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/opt/ros/noetic/setup.bash
roslaunch<span class="w"> </span>roboclaw_node<span class="w"> </span>roboclaw.launch
</code></pre></div>
<p>Check if the <strong>/cmd_vel</strong> topic is available in ROS 1:  </p>
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span>list
</code></pre></div>
<p>You should see <code>/cmd_vel</code> in the list.</p>
<p>To verify if the node is working, try publishing a command directly from ROS 1:  </p>
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span>pub<span class="w"> </span>/cmd_vel<span class="w"> </span>geometry_msgs/Twist<span class="w"> </span><span class="s1">&#39;{linear: {x: 0.5}, angular: {z: 0.1}}&#39;</span>
</code></pre></div>
<p>If the robot moves, the RoboClaw node is working correctly.</p>
<hr />
<h3 id="2-setting-up-the-ros-1-ros-2-bridge"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#2-setting-up-the-ros-1-ros-2-bridge"><strong>2. Setting Up the ROS 1-ROS 2 Bridge</strong></a></h3>
<p>Since ROS 1 and ROS 2 use different communication protocols, we need to bridge them.</p>
<h4 id="step-1-install-the-bridge"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#step-1-install-the-bridge"><strong>Step 1: Install the Bridge</strong></a></h4>
<p>Ensure both ROS 1 and ROS 2 are sourced:  </p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/opt/ros/noetic/setup.bash
<span class="nb">source</span><span class="w"> </span>/opt/ros/foxy/setup.bash
</code></pre></div>
<p>Install <code>ros1_bridge</code>:  </p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>ros-foxy-ros1-bridge
</code></pre></div>
<h4 id="step-2-run-the-bridge"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#step-2-run-the-bridge"><strong>Step 2: Run the Bridge</strong></a></h4>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>ros1_bridge<span class="w"> </span>dynamic_bridge
</code></pre></div>
<p>This will automatically bridge compatible topics between ROS 1 and ROS 2.</p>
<hr />
<h3 id="3-sending-commands-from-ros-2-to-roboclaw"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#3-sending-commands-from-ros-2-to-roboclaw"><strong>3. Sending Commands from ROS 2 to RoboClaw</strong></a></h3>
<p>Now that the bridge is running, switch to a new terminal and <strong>source ROS 2</strong>:  </p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/opt/ros/foxy/setup.bash
</code></pre></div>
<p>Check if the <strong>/cmd_vel</strong> topic is being bridged in ROS 2:  </p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div>
<p>If <code>/cmd_vel</code> appears, you can <strong>publish a movement command from ROS 2</strong>:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>pub<span class="w"> </span>/cmd_vel<span class="w"> </span>geometry_msgs/msg/Twist<span class="w"> </span><span class="s2">&quot;{linear: {x: 0.5}, angular: {z: 0.1}}&quot;</span>
</code></pre></div>
<p>This should <strong>move the robot</strong> as if the command came from ROS 1.</p>
<hr />
<h3 id="4-debugging-common-issues"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#4-debugging-common-issues"><strong>4. Debugging Common Issues</strong></a></h3>
<h4 id="issue-1-ros-1-and-ros-2-variables-overlapping"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#issue-1-ros-1-and-ros-2-variables-overlapping"><strong>Issue 1: ROS 1 and ROS 2 Variables Overlapping</strong></a></h4>
<p><strong>Solution:</strong> Open separate terminals for ROS 1 and ROS 2, and source them separately.</p>
<h4 id="issue-2-the-bridge-doesnt-forward-cmd_vel"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#issue-2-the-bridge-doesnt-forward-cmd_vel"><strong>Issue 2: The Bridge Doesn’t Forward /cmd_vel</strong></a></h4>
<p><strong>Solution:</strong> Restart the bridge and verify that both ROS versions are sourced properly.</p>
<h4 id="issue-3-roboclaw-doesnt-respond-to-commands"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#issue-3-roboclaw-doesnt-respond-to-commands"><strong>Issue 3: RoboClaw Doesn’t Respond to Commands</strong></a></h4>
<p><strong>Solution:</strong> Ensure the RoboClaw node is running, and check <code>/cmd_vel</code> in ROS 1 using:</p>
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/cmd_vel
</code></pre></div>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/30/sending-commands-from-ros-2-to-roboclaw-in-ros-1-with-a-ros-bridge/#conclusion"><strong>Conclusion</strong></a></h3>
<p>By following this guide, you can successfully <strong>control your RoboClaw-powered robot from ROS 2</strong> while it runs on <strong>ROS 1 Noetic</strong>. The <strong>ros1_bridge</strong> ensures seamless communication, allowing hybrid ROS applications.  </p>
<p>With this setup, you can integrate <strong>ROS 2-based navigation stacks</strong> with older ROS 1 hardware.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-30 00:00:00+00:00">January 30, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="automating-the-ros-1-ros-2-bridge-for-roboclaw"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/">Automating the ROS 1-ROS 2 Bridge for RoboClaw</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/#introduction"><strong>Introduction</strong></a></h3>
<p>Setting up the <strong>ROS 1-ROS 2 bridge</strong> manually every time can be frustrating. This guide provides a <strong>Python script</strong> that automates the process, making it easier to run your <strong>RoboClaw motor controller</strong> in ROS 1 while sending commands from ROS 2.</p>
<hr />
<h3 id="why-use-a-bridge"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/#why-use-a-bridge"><strong>Why Use a Bridge?</strong></a></h3>
<p>Since ROS 1 Noetic and ROS 2 Foxy use different middleware, we need the <strong>ros1_bridge</strong> to communicate between them. With this setup, you can <strong>control RoboClaw from ROS 2</strong> while it runs on <strong>ROS 1</strong>.</p>
<hr />
<h3 id="steps-automated-by-the-script"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/#steps-automated-by-the-script"><strong>Steps Automated by the Script</strong></a></h3>
<ol>
<li><strong>Detect ROS 1 and ROS 2 installations</strong>  </li>
<li><strong>Start roscore (if not running)</strong>  </li>
<li><strong>Launch the RoboClaw node in ROS 1</strong>  </li>
<li><strong>Start the ROS 1-ROS 2 bridge</strong>  </li>
<li><strong>Verify if <code>/cmd_vel</code> is bridged between ROS versions</strong>  </li>
<li><strong>Send a velocity command from ROS 2</strong>  </li>
</ol>
<hr />
<h3 id="the-python-script"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/#the-python-script"><strong>The Python Script</strong></a></h3>
<p>Here is the script that automates the process:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Runs a shell command and returns the output &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">check</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CalledProcessError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">source_ros</span><span class="p">(</span><span class="n">version</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Sources the correct ROS environment &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;ros1&quot;</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;source /opt/ros/noetic/setup.bash&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">version</span> <span class="o">==</span> <span class="s2">&quot;ros2&quot;</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;source /opt/ros/foxy/setup.bash&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Invalid ROS version specified&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check_ros_version</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Checks if ROS 1 and ROS 2 are installed &quot;&quot;&quot;</span>
    <span class="n">ros1_check</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;rosversion -d&quot;</span><span class="p">)</span>
    <span class="n">ros2_check</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;ros2 --version&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;noetic&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">ros1_check</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] ROS 1 Noetic detected&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[X] ROS 1 Noetic not found!&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">ros2_check</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[✔] ROS 2 detected (Version: </span><span class="si">{</span><span class="n">ros2_check</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[X] ROS 2 not found!&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">start_roscore</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Starts roscore if not already running &quot;&quot;&quot;</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;pgrep -x roscore&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] roscore is already running&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] Starting roscore...&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;roscore &amp;&quot;</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">start_roboclaw_node</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Launches the RoboClaw node &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] Launching RoboClaw node...&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;roslaunch roboclaw_node roboclaw.launch &amp;&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">start_ros1_bridge</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Starts the ROS 1-ROS 2 bridge &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] Launching ROS 1-ROS 2 bridge...&quot;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;ros2 run ros1_bridge dynamic_bridge &amp;&quot;</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check_cmd_vel_topic</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot; Checks if /cmd_vel is available in both ROS 1 and ROS 2 &quot;&quot;&quot;</span>
    <span class="n">ros1_topics</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;rostopic list&quot;</span><span class="p">)</span>
    <span class="n">ros2_topics</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="s2">&quot;ros2 topic list&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;/cmd_vel&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">ros1_topics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] /cmd_vel is available in ROS 1&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[X] /cmd_vel not found in ROS 1&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;/cmd_vel&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">ros2_topics</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[✔] /cmd_vel is available in ROS 2&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;[X] /cmd_vel not found in ROS 2&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[✔] Setting up ROS 1-ROS 2 Bridge for RoboClaw...&quot;</span><span class="p">)</span>
    <span class="n">check_ros_version</span><span class="p">()</span>

    <span class="n">source_ros</span><span class="p">(</span><span class="s2">&quot;ros1&quot;</span><span class="p">)</span>
    <span class="n">start_roscore</span><span class="p">()</span>
    <span class="n">start_roboclaw_node</span><span class="p">()</span>

    <span class="n">source_ros</span><span class="p">(</span><span class="s2">&quot;ros2&quot;</span><span class="p">)</span>
    <span class="n">start_ros1_bridge</span><span class="p">()</span>

    <span class="n">check_cmd_vel_topic</span><span class="p">()</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">[✔] Setup complete! You can now control RoboClaw from ROS 2.&quot;</span><span class="p">)</span>
</code></pre></div>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/30/automating-the-ros-1-ros-2-bridge-for-roboclaw/#conclusion"><strong>Conclusion</strong></a></h3>
<p>This script <strong>automates the ROS bridge setup</strong> so you can focus on developing your robot. Just run:</p>
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>setup_ros_bridge.py
</code></pre></div>
<p>🚀 <strong>Now you can control your RoboClaw motor from ROS 2 effortlessly!</strong></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-29 00:00:00+00:00">January 29, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/">Running ROS 1 Noetic and ROS 2 Foxy From Source on Ubuntu 20.04</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#introduction">Introduction</a></h3>
<p>Running both ROS 1 (Noetic) and ROS 2 (Foxy) on the same system can be challenging due to differences in dependencies, environment variables, and communication mechanisms. However, Ubuntu 20.04 remains the best option for managing both distributions, as Noetic is the last ROS 1 release and Foxy is a long-term support (LTS) release of ROS 2.</p>
<p>This guide will walk you through the process of installing, sourcing, and managing both ROS versions from source while minimizing conflicts.</p>
<hr />
<h3 id="key-topics-covered"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#key-topics-covered">Key Topics Covered</a></h3>
<ul>
<li>Installing ROS 1 Noetic from source  </li>
<li>Installing ROS 2 Foxy from source  </li>
<li>Managing environment variables to switch between Noetic and Foxy  </li>
<li>Running a ROS 1-ROS 2 bridge for interoperability  </li>
</ul>
<hr />
<h3 id="1-installing-ros-1-noetic-from-source"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#1-installing-ros-1-noetic-from-source">1. Installing ROS 1 Noetic From Source</a></h3>
<p>Since Ubuntu 20.04 is the preferred OS for ROS Noetic, you can follow these steps to build it from source.</p>
<h4 id="step-1-install-dependencies"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-1-install-dependencies"><strong>Step 1: Install Dependencies</strong></a></h4>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-rosdep<span class="w"> </span>python3-rosinstall-generator<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3-vcstool<span class="w"> </span>build-essential
</code></pre></div>
<p>Initialize <code>rosdep</code>:<br />
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>rosdep<span class="w"> </span>init
rosdep<span class="w"> </span>update
</code></pre></div></p>
<h4 id="step-2-create-a-workspace-and-clone-ros-1"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-2-create-a-workspace-and-clone-ros-1"><strong>Step 2: Create a Workspace and Clone ROS 1</strong></a></h4>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>~/ros1_noetic/src
<span class="nb">cd</span><span class="w"> </span>~/ros1_noetic
rosinstall_generator<span class="w"> </span>desktop<span class="w"> </span>--rosdistro<span class="w"> </span>noetic<span class="w"> </span>--deps<span class="w"> </span>--tar<span class="w"> </span>&gt;<span class="w"> </span>noetic.rosinstall
vcs<span class="w"> </span>import<span class="w"> </span>--input<span class="w"> </span>noetic.rosinstall<span class="w"> </span>src
rosdep<span class="w"> </span>install<span class="w"> </span>--from-paths<span class="w"> </span>src<span class="w"> </span>--ignore-src<span class="w"> </span>-r<span class="w"> </span>-y
</code></pre></div>
<h4 id="step-3-build-ros-1"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-3-build-ros-1"><strong>Step 3: Build ROS 1</strong></a></h4>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros1_noetic
colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install
</code></pre></div>
<h4 id="step-4-source-ros-1"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-4-source-ros-1"><strong>Step 4: Source ROS 1</strong></a></h4>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;source ~/ros1_noetic/install/setup.bash&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<p>Verify installation:<br />
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$ROS_DISTRO</span><span class="w">  </span><span class="c1"># Should output &#39;noetic&#39;</span>
</code></pre></div></p>
<hr />
<h3 id="2-installing-ros-2-foxy-from-source"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#2-installing-ros-2-foxy-from-source">2. Installing ROS 2 Foxy From Source</a></h3>
<p>Since Noetic and Foxy have different architectures, we will install ROS 2 Foxy in a separate workspace.</p>
<h4 id="step-1-install-dependencies_1"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-1-install-dependencies_1"><strong>Step 1: Install Dependencies</strong></a></h4>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3-colcon-common-extensions<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python3-vcstool<span class="w"> </span>git<span class="w"> </span>wget
</code></pre></div>
<h4 id="step-2-create-a-workspace-and-clone-ros-2"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-2-create-a-workspace-and-clone-ros-2"><strong>Step 2: Create a Workspace and Clone ROS 2</strong></a></h4>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>~/ros2_foxy/src
<span class="nb">cd</span><span class="w"> </span>~/ros2_foxy
vcs<span class="w"> </span>import<span class="w"> </span>src<span class="w"> </span>&lt;<span class="w"> </span>https://raw.githubusercontent.com/ros2/ros2/foxy/ros2.repos
rosdep<span class="w"> </span>install<span class="w"> </span>--from-paths<span class="w"> </span>src<span class="w"> </span>--ignore-src<span class="w"> </span>-r<span class="w"> </span>-y
</code></pre></div>
<h4 id="step-3-build-ros-2"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-3-build-ros-2"><strong>Step 3: Build ROS 2</strong></a></h4>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros2_foxy
colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install
</code></pre></div>
<h4 id="step-4-source-ros-2"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-4-source-ros-2"><strong>Step 4: Source ROS 2</strong></a></h4>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;source ~/ros2_foxy/install/setup.bash&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div>
<p>Verify installation:<br />
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="nv">$ROS_DISTRO</span><span class="w">  </span><span class="c1"># Should output &#39;foxy&#39;</span>
</code></pre></div></p>
<hr />
<h3 id="3-managing-ros-1-and-ros-2-environments"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#3-managing-ros-1-and-ros-2-environments">3. Managing ROS 1 and ROS 2 Environments</a></h3>
<p>By default, sourcing both ROS 1 and ROS 2 together will cause conflicts. To manage this, create separate aliases:</p>
<h4 id="option-1-use-aliases-to-switch-between-ros-versions"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#option-1-use-aliases-to-switch-between-ros-versions"><strong>Option 1: Use Aliases to Switch Between ROS Versions</strong></a></h4>
<p>Add these lines to your <code>~/.bashrc</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">source_ros1</span><span class="o">=</span><span class="s2">&quot;source ~/ros1_noetic/install/setup.bash&quot;</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">source_ros2</span><span class="o">=</span><span class="s2">&quot;source ~/ros2_foxy/install/setup.bash&quot;</span>
</code></pre></div>
<p>Now, you can quickly switch between them:</p>
<div class="highlight"><pre><span></span><code>source_ros1<span class="w">  </span><span class="c1"># Switch to ROS Noetic</span>
source_ros2<span class="w">  </span><span class="c1"># Switch to ROS 2 Foxy</span>
</code></pre></div>
<h4 id="option-2-use-separate-terminals"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#option-2-use-separate-terminals"><strong>Option 2: Use Separate Terminals</strong></a></h4>
<p>For seamless operation, open two terminals:</p>
<ul>
<li>
<p><strong>Terminal 1 (ROS 1 Noetic)</strong><br />
  <div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>~/ros1_noetic/install/setup.bash
roscore
</code></pre></div></p>
</li>
<li>
<p><strong>Terminal 2 (ROS 2 Foxy)</strong><br />
  <div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>~/ros2_foxy/install/setup.bash
ros2<span class="w"> </span>run<span class="w"> </span>demo_nodes_cpp<span class="w"> </span>talker
</code></pre></div></p>
</li>
</ul>
<hr />
<h3 id="4-running-the-ros-1-ros-2-bridge"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#4-running-the-ros-1-ros-2-bridge">4. Running the ROS 1-ROS 2 Bridge</a></h3>
<p>To communicate between ROS 1 and ROS 2, use <code>ros1_bridge</code>.  </p>
<h4 id="step-1-install-ros1_bridge"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-1-install-ros1_bridge"><strong>Step 1: Install ros1_bridge</strong></a></h4>
<div class="highlight"><pre><span></span><code>source_ros1
source_ros2
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>ros-foxy-ros1-bridge
</code></pre></div>
<h4 id="step-2-run-the-bridge"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#step-2-run-the-bridge"><strong>Step 2: Run the Bridge</strong></a></h4>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>run<span class="w"> </span>ros1_bridge<span class="w"> </span>dynamic_bridge
</code></pre></div>
<p>Now, any topic published in ROS 1 will be available in ROS 2, and vice versa.</p>
<hr />
<h3 id="5-debugging-common-issues"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#5-debugging-common-issues">5. Debugging Common Issues</a></h3>
<h4 id="problem-ros-1-and-ros-2-variables-overlapping"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#problem-ros-1-and-ros-2-variables-overlapping"><strong>Problem: ROS 1 and ROS 2 Variables Overlapping</strong></a></h4>
<p><strong>Solution:</strong> Always source only one ROS version at a time or use separate terminals.</p>
<h4 id="problem-colcon-build-fails"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#problem-colcon-build-fails"><strong>Problem: colcon Build Fails</strong></a></h4>
<p><strong>Solution:</strong> Ensure all dependencies are installed using <code>rosdep update &amp;&amp; rosdep install --from-paths src --ignore-src -r -y</code>.</p>
<h4 id="problem-ros-1-ros-2-bridge-fails-to-start"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#problem-ros-1-ros-2-bridge-fails-to-start"><strong>Problem: ROS 1-ROS 2 Bridge Fails to Start</strong></a></h4>
<p><strong>Solution:</strong><br />
- Ensure both <code>source_ros1</code> and <code>source_ros2</code> are sourced.<br />
- Try restarting the bridge with <code>ros2 run ros1_bridge dynamic_bridge</code>.</p>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/29/running-ros-1-noetic-and-ros-2-foxy-from-source-on-ubuntu-2004/#conclusion">Conclusion</a></h3>
<p>By following this guide, you can successfully install, source, and run both ROS 1 Noetic and ROS 2 Foxy on Ubuntu 20.04 without conflicts. Using environment management strategies such as aliases and separate terminals ensures smooth switching between versions.  </p>
<p>The addition of <code>ros1_bridge</code> further enables seamless communication, making hybrid ROS 1/2 projects possible.  </p>
<p><strong>Happy Coding! 🚀</strong></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-27 00:00:00+00:00">January 27, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="efficient-docker-management-for-robotics"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/">Efficient Docker Management for Robotics</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#introduction">Introduction</a></h3>
<p>Docker is an essential tool for robotics development, offering quick prototyping, environment isolation, and streamlined deployment. However, managing containers effectively—especially with ROS (Robot Operating System)—can be complex. This guide highlights best practices for saving Docker images, removing unused resources, enabling GUI and Bluetooth in containers, and ensuring seamless ROS integration for robotics projects.</p>
<hr />
<h3 id="key-topics-covered"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#key-topics-covered">Key Topics Covered</a></h3>
<ul>
<li>Saving and tagging Docker images for reproducibility  </li>
<li>Cleaning up unused images and resources  </li>
<li>Running Docker containers with GUI and peripheral support  </li>
<li>Setting up ROS workspaces inside containers  </li>
<li>Debugging common integration issues  </li>
</ul>
<hr />
<h3 id="1-saving-docker-containers-as-images"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#1-saving-docker-containers-as-images">1. Saving Docker Containers as Images</a></h3>
<p><strong>Why Save Docker Containers?</strong></p>
<ul>
<li>Preserve your work after container modifications.  </li>
<li>Quickly replicate development environments for prototyping or deployment.  </li>
</ul>
<p><strong>Steps to Save an Image:</strong></p>
<ol>
<li>
<p>Stop the container:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span>&lt;container_name&gt;
</code></pre></div></p>
</li>
<li>
<p>Commit the container to an image:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>commit<span class="w"> </span>&lt;container_id&gt;<span class="w"> </span>&lt;new_image_name&gt;
</code></pre></div></p>
</li>
<li>
<p>Verify the saved image:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>images
</code></pre></div></p>
</li>
</ol>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>commit<span class="w"> </span>96a9ad78d1e6<span class="w"> </span>roboclaw_v02
</code></pre></div></p>
<hr />
<h3 id="2-removing-unused-images-and-containers"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#2-removing-unused-images-and-containers">2. Removing Unused Images and Containers</a></h3>
<p><strong>Why Clean Up?</strong></p>
<ul>
<li>Free up disk space.  </li>
<li>Reduce clutter from unused or dangling images.  </li>
</ul>
<p><strong>Commands:</strong></p>
<ol>
<li>
<p>List dangling images:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>images<span class="w"> </span>-f<span class="w"> </span><span class="nv">dangling</span><span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
</li>
<li>
<p>Remove dangling images:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>image<span class="w"> </span>prune<span class="w"> </span>-f
</code></pre></div></p>
</li>
<li>
<p>Remove specific images:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>rmi<span class="w"> </span>&lt;image_id&gt;
</code></pre></div></p>
</li>
<li>
<p>Remove stopped containers:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>container<span class="w"> </span>prune
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="3-running-containers-with-gui-and-peripheral-support"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#3-running-containers-with-gui-and-peripheral-support">3. Running Containers with GUI and Peripheral Support</a></h3>
<p><strong>Why Enable GUI and Peripherals?</strong></p>
<p>Robotics projects often require visualization tools like RViz and peripheral support for devices such as Xbox controllers or Bluetooth sensors. Docker flags ensure seamless integration.</p>
<p><strong>Command Example:</strong>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>roboclaw_v02<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--net<span class="o">=</span>host<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--privileged<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--device<span class="o">=</span>/dev/input/js0:/dev/input/js0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--device<span class="o">=</span>/dev/input/event0:/dev/input/event0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/var/run/dbus:/var/run/dbus<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>roboclaw_v02
</code></pre></div></p>
<p><strong>Explanation of Flags:</strong></p>
<ul>
<li><code>--net=host</code>: Enables network communication between container and host.  </li>
<li><code>--privileged</code>: Grants access to host devices (e.g., Bluetooth).  </li>
<li><code>--device</code>: Maps input devices for peripherals like controllers.  </li>
<li><code>-v</code>: Mounts directories for GUI and device access.  </li>
</ul>
<hr />
<h3 id="4-setting-up-a-ros-workspace-in-docker"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#4-setting-up-a-ros-workspace-in-docker">4. Setting Up a ROS Workspace in Docker</a></h3>
<p><strong>Why Use a Mounted Workspace?</strong></p>
<ul>
<li>Edit code on the host machine while executing it inside the container.  </li>
<li>Persist changes across container restarts.  </li>
</ul>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p>Run the container with a mounted workspace:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>&lt;container_name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>~/ros_ws:/root/ros_ws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>&lt;base_image&gt;
</code></pre></div></p>
</li>
<li>
<p>Inside the container, initialize the ROS workspace:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros_ws
catkin_make
<span class="nb">source</span><span class="w"> </span>devel/setup.bash
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="5-running-ros-nodes-and-debugging"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#5-running-ros-nodes-and-debugging">5. Running ROS Nodes and Debugging</a></h3>
<h4 id="starting-roscore"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#starting-roscore">Starting <code>roscore</code>:</a></h4>
<ol>
<li>
<p>Attach to the container:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container_name&gt;<span class="w"> </span>/bin/bash
</code></pre></div></p>
</li>
<li>
<p>Start <code>roscore</code>:
   <div class="highlight"><pre><span></span><code>roscore
</code></pre></div></p>
</li>
</ol>
<h4 id="running-ros-nodes"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#running-ros-nodes">Running ROS Nodes:</a></h4>
<ol>
<li>
<p>Source the workspace:
   <div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>~/ros_ws/devel/setup.bash
</code></pre></div></p>
</li>
<li>
<p>Run the node:
   <div class="highlight"><pre><span></span><code>rosrun<span class="w"> </span>roboclaw_node<span class="w"> </span>xbox_teleop_odom.py
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="6-debugging-common-issues"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#6-debugging-common-issues">6. Debugging Common Issues</a></h3>
<h4 id="issue-master-not-found"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#issue-master-not-found">Issue: "Master Not Found"</a></h4>
<ul>
<li>Ensure <code>roscore</code> is running in the same container.</li>
</ul>
<h4 id="issue-device-not-found"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#issue-device-not-found">Issue: "Device Not Found"</a></h4>
<ul>
<li>Verify input device mapping:
   <div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/dev/input/js0
</code></pre></div></li>
</ul>
<h4 id="issue-ros_package_path-missing"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#issue-ros_package_path-missing">Issue: "ROS_PACKAGE_PATH Missing"</a></h4>
<ul>
<li>Set the workspace path:
   <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_PACKAGE_PATH</span><span class="o">=</span>/root/ros_ws/src:<span class="nv">$ROS_PACKAGE_PATH</span>
</code></pre></div></li>
</ul>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/27/efficient-docker-management-for-robotics/#conclusion">Conclusion</a></h3>
<p>By mastering these Docker and ROS workflows, you can create efficient and portable robotics development environments. Whether it’s saving images, enabling peripherals, or debugging nodes, these practices ensure a robust foundation for prototyping and deployment.  </p>
<p><strong>Stay innovative, and build the future of robotics with confidence! 🚀</strong></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-26 00:00:00+00:00">January 26, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/">Mastering Docker and ROS for Roboclaw With Key Tips and Workflows</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#introduction">Introduction</a></h3>
<p>Integrating Docker and ROS for robotics projects, especially with RoboClaw motor controllers, can seem daunting. This post streamlines critical steps, from saving Docker images to running ROS nodes with Xbox controller support, ensuring a smooth and efficient workflow.</p>
<hr />
<h3 id="key-topics-covered"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#key-topics-covered">Key Topics Covered</a></h3>
<ul>
<li>Saving Docker containers for future use</li>
<li>Opening new terminals in containers</li>
<li>Running containers with Bluetooth and port access</li>
<li>Setting up and using a ROS workspace in Docker</li>
<li>Debugging common integration issues</li>
</ul>
<hr />
<h3 id="1-saving-docker-containers"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#1-saving-docker-containers">1. Saving Docker Containers</a></h3>
<p><strong>Why Save Containers?</strong></p>
<ul>
<li>Prevents loss of your setup if the container is stopped or deleted.</li>
<li>Allows easy re-creation of environments.</li>
</ul>
<p><strong>Steps:</strong></p>
<ol>
<li>Stop the container:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>stop<span class="w"> </span>&lt;container_name&gt;
</code></pre></div></li>
<li>Commit the container as an image:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>commit<span class="w"> </span>&lt;container_id&gt;<span class="w"> </span>&lt;new_image_name&gt;
</code></pre></div></li>
<li>Verify the image:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>images
</code></pre></div></li>
</ol>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>commit<span class="w"> </span>96a9ad78d1e6<span class="w"> </span>ros_noetic_with_rviz
</code></pre></div></p>
<hr />
<h3 id="2-opening-a-new-terminal-in-a-running-container"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#2-opening-a-new-terminal-in-a-running-container">2. Opening a New Terminal in a Running Container</a></h3>
<p><strong>Why Do This?</strong></p>
<ul>
<li>Manage multiple ROS nodes or debug processes.</li>
</ul>
<p><strong>Steps:</strong></p>
<ol>
<li>List running containers:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>ps
</code></pre></div></li>
<li>Attach a terminal to the container:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container_name&gt;<span class="w"> </span>/bin/bash
</code></pre></div></li>
</ol>
<p><strong>Example:</strong>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ros_rviz_container<span class="w"> </span>/bin/bash
</code></pre></div></p>
<hr />
<h3 id="3-running-containers-with-bluetooth-and-port-access"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#3-running-containers-with-bluetooth-and-port-access">3. Running Containers with Bluetooth and Port Access</a></h3>
<p><strong>Why Use These Flags?</strong></p>
<ul>
<li><code>--net=host</code>: Enables seamless network communication.</li>
<li><code>--privileged</code>: Grants full access to host devices.</li>
<li><code>--device</code>: Connects peripherals like an Xbox controller.</li>
<li><code>-v</code>: Mounts necessary directories for GUI and Bluetooth.</li>
</ul>
<p><strong>Command Example:</strong>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>roboclaw_v02<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--net<span class="o">=</span>host<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--privileged<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--device<span class="o">=</span>/dev/input/js0:/dev/input/js0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--device<span class="o">=</span>/dev/input/event0:/dev/input/event0<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/var/run/dbus:/var/run/dbus<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-e<span class="w"> </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="nv">$DISPLAY</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>roboclaw_v02
</code></pre></div></p>
<hr />
<h3 id="4-setting-up-a-ros-workspace-in-docker"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#4-setting-up-a-ros-workspace-in-docker">4. Setting Up a ROS Workspace in Docker</a></h3>
<p><strong>Steps:</strong></p>
<ol>
<li>Mount the workspace:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>&lt;container_name&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-v<span class="w"> </span>~/ros_noetic_ws:/root/ros_noetic_ws<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>&lt;base_image&gt;
</code></pre></div></li>
<li>Inside the container:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/ros_noetic_ws
catkin_make
<span class="nb">source</span><span class="w"> </span>devel/setup.bash
</code></pre></div></li>
</ol>
<hr />
<h3 id="5-running-ros-nodes-and-debugging"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#5-running-ros-nodes-and-debugging">5. Running ROS Nodes and Debugging</a></h3>
<h4 id="starting-roscore"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#starting-roscore">Starting roscore:</a></h4>
<ol>
<li>Attach a terminal to the container:
   <div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>&lt;container_name&gt;<span class="w"> </span>/bin/bash
</code></pre></div></li>
<li>Run roscore:
   <div class="highlight"><pre><span></span><code>roscore
</code></pre></div></li>
</ol>
<h4 id="running-a-ros-node"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#running-a-ros-node">Running a ROS Node:</a></h4>
<ol>
<li>Source the workspace:
   <div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>~/ros_noetic_ws/devel/setup.bash
</code></pre></div></li>
<li>Run the node:
   <div class="highlight"><pre><span></span><code>rosrun<span class="w"> </span>roboclaw_node<span class="w"> </span>xbox_teleop_odom.py
</code></pre></div></li>
</ol>
<hr />
<h3 id="6-debugging-common-issues"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#6-debugging-common-issues">6. Debugging Common Issues</a></h3>
<h4 id="problem-master-not-found"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#problem-master-not-found">Problem: "Master Not Found"</a></h4>
<ul>
<li>Ensure roscore is running in the same container.</li>
</ul>
<h4 id="problem-device-not-found"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#problem-device-not-found">Problem: Device Not Found</a></h4>
<ul>
<li>Check device mapping:
   <div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/dev/input/js0
</code></pre></div></li>
</ul>
<h4 id="problem-missing-ros_package_path"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#problem-missing-ros_package_path">Problem: Missing ROS_PACKAGE_PATH</a></h4>
<ul>
<li>Add the workspace to <code>ROS_PACKAGE_PATH</code>:
   <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">ROS_PACKAGE_PATH</span><span class="o">=</span>/root/ros_noetic_ws/src:<span class="nv">$ROS_PACKAGE_PATH</span>
</code></pre></div></li>
</ul>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/26/mastering-docker-and-ros-for-roboclaw-with-key-tips-and-workflows/#conclusion">Conclusion</a></h3>
<p>By following these practices, you can efficiently develop robotics applications using Docker and ROS. This workflow allows for robust integration of peripherals, such as Xbox controllers, and ensures smooth communication between ROS nodes. </p>
<p>Stay innovative and focus on building your robotics vision without being bogged down by setup hurdles!</p>
<p><strong>Happy Robotics! 🚀</strong></p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-23 00:00:00+00:00">January 23, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              3 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/">Setting Up and Running D500 LiDAR Kit's STL-19P on ROS 2 Jazzy</a></h2>
<p>This guide walks you through setting up the D500 LiDAR Kit's <strong>STL-19P</strong> sensor for <strong>ROS 2 Jazzy</strong>, using the <strong>ldrobotSensorTeam/ldlidar_ros2</strong> repository. By the end of this article, you'll be able to configure, launch, and visualize LIDAR data in ROS 2.</p>
<hr />
<h3 id="prerequisites"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#prerequisites">Prerequisites</a></h3>
<p>Before proceeding, ensure you have the following set up:</p>
<ol>
<li>
<p><strong>ROS 2 Jazzy Installed</strong>:
   Follow the <a href="https://docs.ros.org/en/jazzy/Installation.html">official instructions</a> to install ROS 2 Jazzy.</p>
</li>
<li>
<p><strong>Set Up Your ROS 2 Workspace</strong>:
   Create a workspace if you don't already have one:
   <div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>~/Desktop/frata_workspace/src
<span class="nb">cd</span><span class="w"> </span>~/Desktop/frata_workspace
colcon<span class="w"> </span>build
<span class="nb">source</span><span class="w"> </span>install/setup.bash
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="cloning-and-building-the-ldlidar-package"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#cloning-and-building-the-ldlidar-package">Cloning and Building the LDLiDAR Package</a></h3>
<ol>
<li>
<p><strong>Clone the Repository</strong>:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/Desktop/frata_workspace/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/ldrobotSensorTeam/ldlidar_ros2.git
</code></pre></div></p>
</li>
<li>
<p><strong>Install Dependencies</strong>:
   Use <code>rosdep</code> to install any missing dependencies:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/Desktop/frata_workspace
rosdep<span class="w"> </span>install<span class="w"> </span>--from-paths<span class="w"> </span>src<span class="w"> </span>--ignore-src<span class="w"> </span>-r<span class="w"> </span>-y
</code></pre></div></p>
</li>
<li>
<p><strong>Build the Workspace</strong>:
   Compile the package:
   <div class="highlight"><pre><span></span><code>colcon<span class="w"> </span>build<span class="w"> </span>--symlink-install<span class="w"> </span>--cmake-args<span class="o">=</span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release
</code></pre></div></p>
</li>
<li>
<p><strong>Source the Workspace</strong>:
   Add the following to your <code>~/.bashrc</code> and source it:
   <div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source ~/Desktop/frata_workspace/install/local_setup.bash&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>~/.bashrc
<span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="running-the-ldlidar-node"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#running-the-ldlidar-node">Running the LDLiDAR Node</a></h3>
<ol>
<li><strong>Connect the LIDAR to a USB Port</strong>:</li>
<li>
<p>Ensure the LIDAR is connected to your machine. If the device isn't detected, try using a USB extension cable.</p>
</li>
<li>
<p><strong>Identify the Serial Port</strong>:
   Check for the device's serial port:
   <div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/dev/ttyUSB*
</code></pre></div>
   Example output: <code>/dev/ttyUSB0</code>.</p>
</li>
<li>
<p><strong>Launch the Node</strong>:
   Start the LDLiDAR node with the appropriate launch file:
   <div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>ldlidar_ros2<span class="w"> </span>ld19.launch.py
</code></pre></div>
   If required, modify the <code>port_name</code> in the <code>ld19.launch.py</code> file to match your detected port (e.g., <code>/dev/ttyUSB0</code>).</p>
</li>
<li>
<p><strong>View LIDAR Data</strong>:</p>
</li>
<li>Open Rviz2 to visualize the LIDAR data:
     <div class="highlight"><pre><span></span><code>rviz2
</code></pre></div></li>
<li>Add a "LaserScan" display and set the topic to <code>/scan</code>.</li>
</ol>
<hr />
<h3 id="troubleshooting-common-errors"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#troubleshooting-common-errors">Troubleshooting Common Errors</a></h3>
<h4 id="1-communication-abnormal-error"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#1-communication-abnormal-error">1. <strong>"Communication Abnormal" Error</strong></a></h4>
<p>If you encounter this error:
   <div class="highlight"><pre><span></span><code>[ERROR] [ldlidar_publisher_ld19]: ldlidar communication is abnormal.
</code></pre></div></p>
<ul>
<li>
<p><strong>Check Serial Port</strong>: Ensure the correct serial port (<code>/dev/ttyUSB0</code>) is specified in the launch file.</p>
</li>
<li>
<p><strong>Verify Baud Rate</strong>: Confirm that the baud rate in the launch file matches the LIDAR's configuration (default is <code>230400</code>).</p>
</li>
<li>
<p><strong>Reconnect the Device</strong>: Use a USB extension cable if the device isn't recognized properly.</p>
</li>
</ul>
<h4 id="2-device-not-found"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#2-device-not-found">2. <strong>Device Not Found</strong></a></h4>
<ul>
<li>Run:
     <div class="highlight"><pre><span></span><code>ls<span class="w"> </span>/dev/ttyUSB*
</code></pre></div></li>
<li>If no device appears, ensure the LIDAR is securely connected and powered.</li>
</ul>
<h4 id="3-no-data-in-rviz2"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#3-no-data-in-rviz2">3. <strong>No Data in Rviz2</strong></a></h4>
<ul>
<li>Verify the <code>/scan</code> topic is being published:
     <div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>topic<span class="w"> </span>list
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/scan
</code></pre></div></li>
</ul>
<h4 id="4-failed-init_port-fastrtps_port7000-error"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#4-failed-init_port-fastrtps_port7000-error">4. <strong>"Failed init_port fastrtps_port7000" Error</strong></a></h4>
<p>This is a common shared memory transport error in ROS 2.
   - <strong>Solution</strong>: Add the following to your <code>.bashrc</code> to disable shared memory transport:
     <div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">RMW_IMPLEMENTATION</span><span class="o">=</span>rmw_cyclonedds_cpp
</code></pre></div></p>
<hr />
<h3 id="example-launch-output"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#example-launch-output">Example Launch Output</a></h3>
<p>Once everything is set up correctly, you should see the following output:
<div class="highlight"><pre><span></span><code>[INFO] [ldlidar_publisher_ld19]: LDLiDAR SDK Pack Version is:3.3.1
[INFO] [ldlidar_publisher_ld19]: ROS2 param input:
[INFO] [ldlidar_publisher_ld19]: ldlidar serial connect is success
[INFO] [ldlidar_publisher_ld19]: ldlidar communication is normal.
[INFO] [ldlidar_publisher_ld19]: ldlidar driver start is success.
[INFO] [ldlidar_publisher_ld19]: start normal, pub lidar data
</code></pre></div></p>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/23/setting-up-and-running-d500-lidar-kits-stl-19p-on-ros-2-jazzy/#conclusion">Conclusion</a></h3>
<p>With this guide, you can successfully set up and run the D500 LiDAR Kit's STL-19P  on ROS 2 Jazzy. If you encounter the <strong>"communication abnormal"</strong> or other errors, refer to the troubleshooting section to resolve them quickly. This setup enables seamless LIDAR integration for your autonomous robotics projects.</p>
<p>For more information, visit the <a href="https://github.com/ldrobotSensorTeam/ldlidar_ros2">ldrobotSensorTeam GitHub repository</a>.</p>
<hr />
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-23 00:00:00+00:00">January 23, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/">Setting Up the <code>roboclaw_ros</code> Node with ROS Noetic in Docker</a></h2>
<h3 id="introduction"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#introduction">Introduction</a></h3>
<p>In this guide, we’ll walk through setting up the <code>roboclaw_ros</code> node in ROS Noetic using Docker. This approach ensures a clean, consistent environment for development and deployment while leveraging Docker's flexibility. We'll cover everything from creating the Docker image to running the node with the correct configurations.</p>
<hr />
<h3 id="prerequisites"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#prerequisites">Prerequisites</a></h3>
<p>Before proceeding, ensure you have:</p>
<ol>
<li><strong>Docker Installed</strong>: Docker must be installed and operational on your system.  </li>
<li><strong>Hardware Setup</strong>:</li>
<li>A Roboclaw motor controller connected to <code>/dev/ttyACM0</code>.  </li>
<li>Encoders configured for your robot’s specific dimensions.  </li>
<li><strong>Dependencies Installed</strong>:</li>
<li>The <code>roboclaw_driver</code> library for ROS.  </li>
<li>Python libraries like <code>pyserial</code> for communication.  </li>
</ol>
<hr />
<h3 id="setup-steps"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#setup-steps">Setup Steps</a></h3>
<h4 id="1-pull-the-base-docker-image"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#1-pull-the-base-docker-image">1. Pull the Base Docker Image</a></h4>
<p>Start by pulling the base Docker image for ROS Noetic:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>pull<span class="w"> </span>arm64v8/ros:noetic-ros-base
</code></pre></div>
<hr />
<h4 id="2-run-a-container-and-install-ros-noetic-components"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#2-run-a-container-and-install-ros-noetic-components">2. Run a Container and Install ROS Noetic Components</a></h4>
<p>Launch a container from the base image:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ros_noetic_container<span class="w"> </span>--rm<span class="w"> </span>arm64v8/ros:noetic-ros-base
</code></pre></div>
<p>Inside the container, update and install required packages:</p>
<div class="highlight"><pre><span></span><code>apt<span class="w"> </span>update
apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>ros-noetic-rosbridge-server<span class="w"> </span>ros-noetic-tf<span class="w"> </span>python3-serial<span class="w"> </span>python3-pip
pip3<span class="w"> </span>install<span class="w"> </span>diagnostic-updater
</code></pre></div>
<hr />
<h4 id="3-create-and-mount-a-workspace"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#3-create-and-mount-a-workspace">3. Create and Mount a Workspace</a></h4>
<p>To persist your workspace across sessions, create a workspace on your host machine and mount it in the container:</p>
<div class="highlight"><pre><span></span><code>mkdir<span class="w"> </span>-p<span class="w"> </span>~/ros_noetic_ws/src
sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ros_noetic_container<span class="w"> </span>--rm<span class="w"> </span>-v<span class="w"> </span>~/ros_noetic_ws:/root/ros_noetic_ws<span class="w"> </span>arm64v8/ros:noetic-ros-base
</code></pre></div>
<p>Inside the container, initialize the workspace:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/ros_noetic_ws
catkin_make
</code></pre></div>
<hr />
<h4 id="4-clone-the-roboclaw_ros-repository"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#4-clone-the-roboclaw_ros-repository">4. Clone the <code>roboclaw_ros</code> Repository</a></h4>
<p>Clone the repository into the workspace:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/ros_noetic_ws/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/DoanNguyenTrong/roboclaw_ros.git
</code></pre></div>
<hr />
<h4 id="5-build-the-workspace"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#5-build-the-workspace">5. Build the Workspace</a></h4>
<p>Return to the root of the workspace and build it:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/root/ros_noetic_ws
catkin_make
<span class="nb">source</span><span class="w"> </span>devel/setup.bash
</code></pre></div>
<hr />
<h4 id="6-save-the-docker-image"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#6-save-the-docker-image">6. Save the Docker Image</a></h4>
<p>To save your container for future use, commit it as a new image:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>commit<span class="w"> </span>ros_noetic_container<span class="w"> </span>ros_noetic_saved
</code></pre></div>
<p>Run this saved image with automatic restart enabled:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ros_noetic_container<span class="w"> </span>--restart<span class="w"> </span>always<span class="w"> </span>ros_noetic_saved
</code></pre></div>
<hr />
<h3 id="running-the-roboclaw_ros-node"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#running-the-roboclaw_ros-node">Running the <code>roboclaw_ros</code> Node</a></h3>
<p>To run the <code>roboclaw_ros</code> node, use the following steps:</p>
<h4 id="1-start-the-container"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#1-start-the-container">1. Start the Container</a></h4>
<p>Start the container with the saved image:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span>start<span class="w"> </span>-ai<span class="w"> </span>ros_noetic_container
</code></pre></div>
<h4 id="2-launch-the-node"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#2-launch-the-node">2. Launch the Node</a></h4>
<p>Inside the container, run the launch file:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>roboclaw_node<span class="w"> </span>roboclaw.launch
</code></pre></div>
<hr />
<h3 id="testing-the-node"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#testing-the-node">Testing the Node</a></h3>
<p>To verify the node's functionality:</p>
<ol>
<li><strong>Publish Commands to <code>/cmd_vel</code>:</strong></li>
</ol>
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span>pub<span class="w"> </span>/cmd_vel<span class="w"> </span>geometry_msgs/Twist<span class="w"> </span><span class="s1">&#39;{linear: {x: 0.5}, angular: {z: 0.1}}&#39;</span>
</code></pre></div>
<ol>
<li><strong>Monitor Output:</strong></li>
</ol>
<p>Check odometry data on <code>/odom</code>:</p>
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/odom
</code></pre></div>
<hr />
<h3 id="viewing-docker-folder-structure"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#viewing-docker-folder-structure">Viewing Docker Folder Structure</a></h3>
<p>To view the folder structure inside the container, use:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ros_noetic_container<span class="w"> </span>bash
<span class="nb">cd</span><span class="w"> </span>/root/ros_noetic_ws
tree
</code></pre></div>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/23/setting-up-the-roboclaw_ros-node-with-ros-noetic-in-docker/#conclusion">Conclusion</a></h3>
<p>This guide provides a straightforward approach to setting up and running the <code>roboclaw_ros</code> node in a ROS Noetic Docker environment. Docker ensures consistency and portability, making it an ideal choice for robotics development. By following these steps, you can integrate Roboclaw into your robotic system efficiently.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-22 00:00:00+00:00">January 22, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/">Setting Up and Running a Roboclaw-Based ROS Node with Obstacle Avoidance</a></h2>
<h3 id="setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance_1"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance_1">Setting Up and Running a Roboclaw-Based ROS Node with Obstacle Avoidance</a></h3>
<p>This guide walks you through setting up and running a Roboclaw-based ROS node with obstacle avoidance functionality using LIDAR sensors. Follow these steps to configure and launch your robotics system efficiently.</p>
<hr />
<h3 id="prerequisites"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#prerequisites">Prerequisites</a></h3>
<p>Before starting, ensure the following are set up on your system:</p>
<ol>
<li><strong>ROS Installed</strong>: Ensure you have ROS Melodic or a compatible version installed on your system.</li>
<li><strong>Workspace Prepared</strong>: Your ROS workspace (e.g., <code>~/armpi_pro</code>) is built and sourced.</li>
<li><strong>Packages Installed</strong>:</li>
<li><code>roboclaw_ros</code> for motor control.</li>
<li><code>ldlidar_stl_ros</code> for LIDAR sensor integration.</li>
<li><strong>Hardware Connections</strong>:</li>
<li>Roboclaw is connected via <code>/dev/ttyACM0</code>.</li>
<li>LIDAR sensor is operational and connected (e.g., <code>/dev/ttyUSB0</code>).</li>
</ol>
<hr />
<h3 id="launching-the-required-nodes"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#launching-the-required-nodes">Launching the Required Nodes</a></h3>
<p>To operate the system, you need to launch three components in sequence:</p>
<h4 id="1-start-the-ros-core"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#1-start-the-ros-core">1. <strong>Start the ROS Core</strong></a></h4>
<p>Open a terminal and launch the ROS core:</p>
<div class="highlight"><pre><span></span><code>roscore
</code></pre></div>
<p>Keep this terminal open as it provides the foundation for all ROS nodes.</p>
<hr />
<h4 id="2-launch-the-roboclaw-node"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#2-launch-the-roboclaw-node">2. <strong>Launch the Roboclaw Node</strong></a></h4>
<p>In a new terminal, navigate to your workspace and launch the Roboclaw node:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>roboclaw_node<span class="w"> </span>roboclaw.launch
</code></pre></div>
<p>This node handles motor control, publishing odometry, and subscribing to velocity commands (<code>/cmd_vel</code>).</p>
<hr />
<h4 id="3-launch-the-lidar-node"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#3-launch-the-lidar-node">3. <strong>Launch the LIDAR Node</strong></a></h4>
<p>In another terminal, launch the LIDAR node:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>ldlidar_stl_ros<span class="w"> </span>ld19.launch
</code></pre></div>
<p>This node processes LIDAR data and publishes it to the <code>/scan</code> topic.</p>
<hr />
<h3 id="running-the-obstacle-avoidance-node"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#running-the-obstacle-avoidance-node">Running the Obstacle Avoidance Node</a></h3>
<p>Once the Roboclaw and LIDAR nodes are running, you can start the obstacle avoidance script. This script subscribes to <code>/scan</code> for LIDAR data and publishes velocity commands to <code>/cmd_vel</code>.</p>
<ol>
<li>
<p>Ensure the script is located at:
   <div class="highlight"><pre><span></span><code>~/armpi_pro/src/roboclaw_ros/roboclaw_node/scripts/obstacle_avoidance.py
</code></pre></div></p>
</li>
<li>
<p>Make the script executable:
   <div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>~/armpi_pro/src/roboclaw_ros/roboclaw_node/scripts/obstacle_avoidance.py
</code></pre></div></p>
</li>
<li>
<p>Run the script using <code>rosrun</code>:
   <div class="highlight"><pre><span></span><code>rosrun<span class="w"> </span>roboclaw_node<span class="w"> </span>obstacle_avoidance.py
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="how-it-works"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#how-it-works">How It Works</a></h3>
<ol>
<li>
<p><strong>LIDAR Data Processing</strong>:
   The obstacle avoidance node processes data from <code>/scan</code>. It checks for obstacles within 6 inches (0.15 meters) in front of the robot.</p>
</li>
<li>
<p><strong>Motor Commands</strong>:</p>
</li>
<li>If an obstacle is detected, the script sends a stop command to <code>/cmd_vel</code>.</li>
<li>If the path is clear, the script commands the robot to move forward.</li>
</ol>
<hr />
<h3 id="example-workflow"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#example-workflow">Example Workflow</a></h3>
<p>Here’s how you would set up and run the entire system step-by-step:</p>
<ol>
<li>
<p>Open a terminal and start the ROS core:
   <div class="highlight"><pre><span></span><code>roscore
</code></pre></div></p>
</li>
<li>
<p>In a second terminal, launch the Roboclaw node:
   <div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>roboclaw_node<span class="w"> </span>roboclaw.launch
</code></pre></div></p>
</li>
<li>
<p>In a third terminal, launch the LIDAR node:
   <div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>ldlidar_stl_ros<span class="w"> </span>ld19.launch
</code></pre></div></p>
</li>
<li>
<p>Finally, in a fourth terminal, run the obstacle avoidance script:
   <div class="highlight"><pre><span></span><code>rosrun<span class="w"> </span>roboclaw_node<span class="w"> </span>obstacle_avoidance.py
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="troubleshooting"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#troubleshooting">Troubleshooting</a></h3>
<ol>
<li>
<p><strong>Package Not Found</strong>:
   If you encounter errors like <code>package 'roboclaw_node' not found</code>, rebuild your workspace:
   <div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/armpi_pro
catkin_make
<span class="nb">source</span><span class="w"> </span>devel/setup.bash
</code></pre></div></p>
</li>
<li>
<p><strong>LIDAR or Roboclaw Not Responding</strong>:</p>
</li>
<li>Verify device connections using <code>ls /dev/tty*</code> for correct port names.</li>
<li>
<p>Update the respective <code>.launch</code> files to reflect the correct ports.</p>
</li>
<li>
<p><strong>Script Permissions</strong>:
   Ensure all scripts are executable using:
   <div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x<span class="w"> </span>~/armpi_pro/src/roboclaw_ros/roboclaw_node/scripts/*.py
</code></pre></div></p>
</li>
</ol>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/22/setting-up-and-running-a-roboclaw-based-ros-node-with-obstacle-avoidance/#conclusion">Conclusion</a></h3>
<p>With this setup, your robot is capable of autonomously navigating forward and stopping when obstacles are detected. The modular structure allows for easy debugging and future enhancements, such as adding new sensors or navigation strategies.</p>
<p>Mastering these steps ensures a reliable and robust robotic system ready for real-world applications.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-22 00:00:00+00:00">January 22, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/robotics/" class="md-meta__link">Robotics</a></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/">Setting Up Hector SLAM with ROS 1 for a Roboclaw-Based Rover</a></h2>
<h3 id="setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover_1"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover_1">Setting Up Hector SLAM with ROS 1 for a Roboclaw-Based Rover</a></h3>
<p>This guide details the steps to configure and use Hector SLAM with a Roboclaw-based ROS 1 robot. We’ll cover LIDAR integration, transform configuration, and how to set RViz for successful mapping and navigation.</p>
<hr />
<h3 id="prerequisites"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#prerequisites">Prerequisites</a></h3>
<p>Ensure the following are set up on your system:</p>
<ol>
<li><strong>ROS Installed</strong>: ROS Melodic or a compatible version is installed.</li>
<li><strong>Workspace Prepared</strong>: A catkin workspace (e.g., <code>~/armpi_pro</code>) is created, built, and sourced.</li>
<li><strong>Hector SLAM Package</strong>:</li>
<li>Installed and located in your workspace under <code>src/hector_slam</code>.</li>
<li>Ensure <code>hector_mapping</code> and <code>hector_slam_launch</code> are available.</li>
<li><strong>LIDAR Sensor</strong>:</li>
<li>Configured and publishing scan data to <code>/scan</code>.</li>
<li><strong>Roboclaw Node</strong>:</li>
<li>Operational, publishing odometry to <code>/odom</code>.</li>
</ol>
<hr />
<h3 id="steps-to-set-up-hector-slam"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#steps-to-set-up-hector-slam">Steps to Set Up Hector SLAM</a></h3>
<h4 id="1-launch-ros-core"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#1-launch-ros-core">1. <strong>Launch ROS Core</strong></a></h4>
<p>Open a terminal and start the ROS core:</p>
<div class="highlight"><pre><span></span><code>roscore
</code></pre></div>
<p>This is required for all other nodes to communicate.</p>
<hr />
<h4 id="2-launch-the-lidar-and-roboclaw-nodes"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#2-launch-the-lidar-and-roboclaw-nodes">2. <strong>Launch the LIDAR and RoboClaw Nodes</strong></a></h4>
<p>To enable LIDAR data for mapping, launch the LIDAR node in a new terminal:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>ldlidar_stl_ros<span class="w"> </span>ld19.launch
</code></pre></div>
<p>This ensures the LIDAR sensor is active and publishing data to the <code>/scan</code> topic, which is necessary for Hector SLAM to create a map.</p>
<hr />
<h4 id="3-configure-and-launch-hector-mapping"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#3-configure-and-launch-hector-mapping">3. <strong>Configure and Launch Hector Mapping</strong></a></h4>
<p>In your workspace, navigate to the Hector SLAM launch folder:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/armpi_pro/src/hector_slam/hector_slam_launch/launch
</code></pre></div>
<p>Use the <code>tutorial.launch</code> file as a base for running Hector SLAM. Modify the following parameters in the launch file to match your setup:</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;launch&gt;</span>
<span class="w">    </span><span class="cm">&lt;!-- Hector Mapping Node --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;hector_mapping&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;hector_mapping&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;hector_mapping&quot;</span><span class="w"> </span><span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;pub_map_odom_transform&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;true&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;map_frame&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;map&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;base_frame&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;base_link&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;param</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;odom_frame&quot;</span><span class="w"> </span><span class="na">value=</span><span class="s">&quot;odom&quot;</span><span class="nt">/&gt;</span>
<span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;scan&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/scan&quot;</span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- Your LIDAR topic --&gt;</span>
<span class="w">        </span><span class="nt">&lt;remap</span><span class="w"> </span><span class="na">from=</span><span class="s">&quot;odom&quot;</span><span class="w"> </span><span class="na">to=</span><span class="s">&quot;/odom&quot;</span><span class="nt">/&gt;</span><span class="w">  </span><span class="cm">&lt;!-- Your odometry topic --&gt;</span>
<span class="w">    </span><span class="nt">&lt;/node&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- Static Transform Publisher --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;tf2_ros&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;static_transform_publisher&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;laser_to_base_link&quot;</span>
<span class="w">          </span><span class="na">args=</span><span class="s">&quot;0 0 0.2 0 0 0 base_link laser_link&quot;</span><span class="nt">/&gt;</span>

<span class="w">    </span><span class="cm">&lt;!-- RViz for Visualization --&gt;</span>
<span class="w">    </span><span class="nt">&lt;node</span><span class="w"> </span><span class="na">pkg=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;rviz&quot;</span><span class="w"> </span><span class="na">args=</span><span class="s">&quot;-d $(find hector_slam_launch)/rviz_cfg/mapping.rviz&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</code></pre></div>
<p>Run the newly created launch file above using:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>hector_slam_launch<span class="w"> </span>mapping_with_odom.launch
</code></pre></div>
<hr />
<h4 id="4-adjust-rviz-configuration"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#4-adjust-rviz-configuration">4. <strong>Adjust RViz Configuration</strong></a></h4>
<p>To visualize the mapping process:</p>
<ol>
<li>
<p>Start RViz:
   <div class="highlight"><pre><span></span><code>rosrun<span class="w"> </span>rviz<span class="w"> </span>rviz
</code></pre></div></p>
</li>
<li>
<p>Set the <strong>Fixed Frame</strong> to <code>scanmatcher_frame</code>:</p>
</li>
<li>Navigate to <code>Global Options</code> in RViz.</li>
<li>
<p>Set <code>Fixed Frame</code> to <code>scanmatcher_frame</code>.</p>
</li>
<li>
<p>Add relevant displays:</p>
</li>
<li><strong>Map</strong>: Subscribe to <code>/map</code> for live updates.</li>
<li><strong>LaserScan</strong>: Subscribe to <code>/scan</code> to visualize LIDAR data.</li>
<li><strong>TF</strong>: Check the frame hierarchy and transformations.</li>
</ol>
<hr />
<h4 id="5-launch-the-roboclaw-node"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#5-launch-the-roboclaw-node">5. <strong>Launch the Roboclaw Node</strong></a></h4>
<p>Start the Roboclaw node to handle motor control and odometry:</p>
<div class="highlight"><pre><span></span><code>roslaunch<span class="w"> </span>roboclaw_node<span class="w"> </span>roboclaw.launch
</code></pre></div>
<p>This node should publish odometry data to the <code>/odom</code> topic, which Hector SLAM uses.</p>
<hr />
<h4 id="6-run-the-rover"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#6-run-the-rover">6. <strong>Run the rover</strong></a></h4>
<p>Now that the mapping and motor control nodes are active:</p>
<ul>
<li>Drive the rover manually or programmatically using the following script:
    <div class="highlight"><pre><span></span><code>    <span class="c1">#!/usr/bin/env python2</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Example: Use Pygame to read an Xbox controller and RoboClaw on ROS Melodic (Python 2).</span>
<span class="sd">No f-strings; uses .format().</span>

<span class="sd">Make sure:</span>
<span class="sd">  1) roscore is running (for rospy logs).</span>
<span class="sd">  2) SDL_VIDEODRIVER=dummy is set if headless: export SDL_VIDEODRIVER=dummy</span>
<span class="sd">  3) RoboClaw is on /dev/ttyACM0 (or change param).</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># For TF in Melodic (Python 2)</span>
<span class="kn">import</span> <span class="nn">tf</span>
<span class="kn">import</span> <span class="nn">tf.transformations</span> <span class="k">as</span> <span class="nn">tft</span>

<span class="c1"># RoboClaw library (python2-compatible)</span>
<span class="kn">from</span> <span class="nn">roboclaw</span> <span class="kn">import</span> <span class="n">Roboclaw</span>

<span class="k">class</span> <span class="nc">XboxRoboclawDebugPy2</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># 1) ROS init</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s2">&quot;xbox_teleop_debug_py2&quot;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Starting xbox_teleop_debug_py2 node...&quot;</span><span class="p">)</span>

        <span class="c1"># 2) RoboClaw Setup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">port_name</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s2">&quot;~port&quot;</span><span class="p">,</span> <span class="s2">&quot;/dev/ttyACM0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s2">&quot;~baud&quot;</span><span class="p">,</span> <span class="mi">115200</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">address</span>   <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">get_param</span><span class="p">(</span><span class="s2">&quot;~address&quot;</span><span class="p">,</span> <span class="mh">0x80</span><span class="p">)</span>  <span class="c1"># decimal 128</span>

        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Attempting to open RoboClaw on </span><span class="si">{0}</span><span class="s2"> at </span><span class="si">{1}</span><span class="s2"> baud, address=0x</span><span class="si">{2:X}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">port_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rc</span> <span class="o">=</span> <span class="n">Roboclaw</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">port_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">baud_rate</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">Open</span><span class="p">():</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">logerr</span><span class="p">(</span><span class="s2">&quot;Failed to open RoboClaw on </span><span class="si">{0}</span><span class="s2">. Exiting.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">port_name</span><span class="p">))</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;RoboClaw opened successfully on </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">port_name</span><span class="p">))</span>

        <span class="c1"># 3) Initialize Pygame</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

        <span class="n">joystick_count</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_count</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Detected </span><span class="si">{0}</span><span class="s2"> joystick(s).&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">joystick_count</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">joystick_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">logerr</span><span class="p">(</span><span class="s2">&quot;No joystick detected. Exiting.&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">Joystick</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Joystick: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_name</span><span class="p">()))</span>

        <span class="c1"># 4) Speed config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_speed_cmd</span> <span class="o">=</span> <span class="mf">15.0</span>  <span class="c1"># if 127 is full speed, 20 is slower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deadzone</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;max_speed_cmd=</span><span class="si">{0}</span><span class="s2">, deadzone=</span><span class="si">{1}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_speed_cmd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deadzone</span><span class="p">))</span>

        <span class="c1"># Rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loop_rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>  <span class="c1"># 20 Hz</span>

        <span class="c1"># On shutdown =&gt; stop motors</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">on_shutdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_motors</span><span class="p">)</span>

        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Initialization complete. Ready to run...&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stop_motors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Stopping motors.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">ForwardM1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">ForwardM2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">loop_counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>
            <span class="n">loop_counter</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="c1"># Just for debugging</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">logdebug</span><span class="p">(</span><span class="s2">&quot;Main loop iteration=</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">loop_counter</span><span class="p">))</span>

            <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">pump</span><span class="p">()</span>

            <span class="c1"># Example: left stick vertical = axis 1, right stick horizontal = axis 3</span>
            <span class="n">forward_axis</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_axis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">turn_axis</span>    <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">get_axis</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

            <span class="c1"># Debug prints</span>
            <span class="n">rospy</span><span class="o">.</span><span class="n">logdebug</span><span class="p">(</span><span class="s2">&quot;Raw axes =&gt; forward_axis=</span><span class="si">{0:.2f}</span><span class="s2">, turn_axis=</span><span class="si">{1:.2f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">forward_axis</span><span class="p">,</span> <span class="n">turn_axis</span><span class="p">))</span>

            <span class="c1"># Deadzone</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">forward_axis</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">deadzone</span><span class="p">:</span>
                <span class="n">forward_axis</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">turn_axis</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">deadzone</span><span class="p">:</span>
                <span class="n">turn_axis</span> <span class="o">=</span> <span class="mf">0.0</span>

            <span class="c1"># Skid-steer mixing</span>
            <span class="n">left_val</span>  <span class="o">=</span> <span class="n">forward_axis</span> <span class="o">-</span> <span class="n">turn_axis</span>
            <span class="n">right_val</span> <span class="o">=</span> <span class="n">forward_axis</span> <span class="o">+</span> <span class="n">turn_axis</span>

            <span class="c1"># clamp [-1..+1]</span>
            <span class="n">left_val</span>  <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">left_val</span><span class="p">))</span>
            <span class="n">right_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">right_val</span><span class="p">))</span>

            <span class="c1"># Convert to RoboClaw speed</span>
            <span class="n">left_speed</span><span class="p">,</span> <span class="n">left_dir</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_speed</span><span class="p">(</span><span class="n">left_val</span><span class="p">)</span>
            <span class="n">right_speed</span><span class="p">,</span> <span class="n">right_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_speed</span><span class="p">(</span><span class="n">right_val</span><span class="p">)</span>

            <span class="n">rospy</span><span class="o">.</span><span class="n">logdebug</span><span class="p">(</span><span class="s2">&quot;Mixed =&gt; L=</span><span class="si">{0:.2f}</span><span class="s2">, R=</span><span class="si">{1:.2f}</span><span class="s2"> =&gt; speeds </span><span class="si">{2}</span><span class="s2"> (</span><span class="si">{3}</span><span class="s2">), </span><span class="si">{4}</span><span class="s2"> (</span><span class="si">{5}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">left_val</span><span class="p">,</span> <span class="n">right_val</span><span class="p">,</span> <span class="n">left_speed</span><span class="p">,</span> <span class="n">left_dir</span><span class="p">,</span> <span class="n">right_speed</span><span class="p">,</span> <span class="n">right_dir</span><span class="p">))</span>

            <span class="c1"># Send to motors</span>
            <span class="k">if</span> <span class="n">left_dir</span> <span class="o">==</span> <span class="s2">&quot;forward&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">ForwardM1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">left_speed</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">BackwardM1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">left_speed</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">right_dir</span> <span class="o">==</span> <span class="s2">&quot;forward&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">ForwardM2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">right_speed</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rc</span><span class="o">.</span><span class="n">BackwardM2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">right_speed</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">loop_rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stop_motors</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">convert_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert [-1..+1] =&gt; (0..max_speed_cmd, direction).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">val</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_speed_cmd</span><span class="p">),</span> <span class="s2">&quot;forward&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_speed_cmd</span><span class="p">),</span> <span class="s2">&quot;backward&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">XboxRoboclawDebugPy2</span><span class="p">()</span>
        <span class="n">node</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Exiting python2 xbox teleop script.&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div></li>
<li>Watch the map being built in RViz.</li>
<li>Ensure the rover avoids obstacles and updates the map in real-time.</li>
</ul>
<hr />
<h3 id="key-adjustments-made"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#key-adjustments-made">Key Adjustments Made</a></h3>
<p>Here’s a summary of the adjustments we made to configure Hector SLAM:</p>
<ol>
<li>Set <strong>Fixed Frame</strong> in RViz to <code>scanmatcher_frame</code>.</li>
<li>Modified the Hector SLAM launch file to include:</li>
<li><code>pub_map_odom_transform</code> set to <code>true</code>.</li>
<li>Correct frame names (<code>map</code>, <code>odom</code>, <code>base_link</code>).</li>
<li>Verified LIDAR publishing to <code>/scan</code> using <code>ld19.launch</code>.</li>
<li>Ensured odometry data was published to <code>/odom</code> by the Roboclaw node.</li>
</ol>
<hr />
<h3 id="troubleshooting"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#troubleshooting">Troubleshooting</a></h3>
<h4 id="error-transform-lookup-failed"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#error-transform-lookup-failed">Error: Transform Lookup Failed</a></h4>
<p>If you see errors like "Lookup would require extrapolation into the future," check the following:
- Ensure the system clocks are synchronized using <code>ntp</code> or <code>chrony</code>.
- Verify all topics (<code>/scan</code>, <code>/odom</code>) have valid and synchronized timestamps.</p>
<h4 id="lidar-not-publishing"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#lidar-not-publishing">LIDAR Not Publishing</a></h4>
<p>Run:
<div class="highlight"><pre><span></span><code>rostopic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/scan
</code></pre></div>
If no data appears, ensure the LIDAR launch file is correctly configured and the sensor is operational.</p>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/22/setting-up-hector-slam-with-ros-1-for-a-roboclaw-based-rover/#conclusion">Conclusion</a></h3>
<p>By following these steps, you’ve successfully set up Hector SLAM on a Roboclaw-based ROS 1 rover. With LIDAR and odometry data, your rover can build a 2D map of its environment, enabling autonomous navigation and enhanced spatial awareness.</p>
<p>Feel free to experiment with SLAM parameters and refine your rover’s capabilities for your specific use case.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2025-01-15 00:00:00+00:00">January 15, 2025</time></li>
        
          <li class="md-meta__item">
            in
            
              <a href="category/programming/" class="md-meta__link">Programming</a></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="bypassing-cloudflare-with-selenium-and-undetected-chromedriver"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/">Bypassing Cloudflare with Selenium and Undetected-Chromedriver</a></h2>
<h3 id="bypassing-cloudflare-with-selenium-and-undetected-chromedriver_1"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#bypassing-cloudflare-with-selenium-and-undetected-chromedriver_1">Bypassing Cloudflare with Selenium and Undetected-Chromedriver</a></h3>
<p>By combining <strong>Selenium</strong> with <strong>undetected-chromedriver (UC)</strong>, you can overcome common automation challenges like Cloudflare's browser verification. This guide explores practical workflows and techniques to enhance your web automation projects.</p>
<hr />
<h3 id="why-use-selenium-with-undetected-chromedriver"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#why-use-selenium-with-undetected-chromedriver">Why Use Selenium with Undetected-Chromedriver?</a></h3>
<p>Cloudflare protections are designed to block bots, posing challenges for developers. By using undetected-chromedriver with Selenium, you can:</p>
<ul>
<li><strong>Bypass Browser Fingerprinting:</strong> UC modifies ChromeDriver to avoid detection.</li>
<li><strong>Handle Cloudflare Challenges:</strong> Seamlessly bypass "wait while your browser is verified" messages.</li>
<li><strong>Mitigate CAPTCHA Issues:</strong> Reduce interruptions caused by automated bot checks.</li>
</ul>
<hr />
<h3 id="detection-challenges-in-web-automation"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#detection-challenges-in-web-automation">Detection Challenges in Web Automation</a></h3>
<p>Websites employ multiple strategies to detect and prevent automated interactions:</p>
<ul>
<li><strong>CAPTCHA Challenges:</strong> Validating user authenticity.</li>
<li><strong>Cloudflare Browser Verification:</strong> Infinite loading screens or token-based checks.</li>
<li><strong>Bot Detection Mechanisms:</strong> Browser fingerprinting, behavioral analytics, and cookie validation.</li>
</ul>
<p>These barriers often require advanced techniques to maintain automation workflows.</p>
<hr />
<h3 id="the-solution-selenium-and-undetected-chromedriver"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#the-solution-selenium-and-undetected-chromedriver">The Solution: Selenium and Undetected-Chromedriver</a></h3>
<p>The undetected-chromedriver library modifies the default ChromeDriver to emulate human-like behavior and evade detection. When integrated with Selenium, it allows:</p>
<ol>
<li><strong>Seamless CAPTCHA Bypass:</strong> Minimize interruptions by automating responses or avoiding challenges.</li>
<li><strong>Cloudflare Token Handling:</strong> Automatically manage verification processes.</li>
<li><strong>Cookie Reuse for Session Preservation:</strong> Skip repetitive verifications by reusing authenticated cookies.</li>
</ol>
<hr />
<h3 id="implementation-guide-setting-up-selenium-with-undetected-chromedriver"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#implementation-guide-setting-up-selenium-with-undetected-chromedriver">Implementation Guide: Setting Up Selenium with Undetected-Chromedriver</a></h3>
<h4 id="step-1-install-required-libraries"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-1-install-required-libraries">Step 1: Install Required Libraries</a></h4>
<p>Install Selenium and undetected-chromedriver:
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>selenium<span class="w"> </span>undetected-chromedriver
</code></pre></div></p>
<h4 id="step-2-initialize-the-browser-driver"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-2-initialize-the-browser-driver">Step 2: Initialize the Browser Driver</a></h4>
<p>Set up a Selenium session with UC:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">undetected_chromedriver</span> <span class="k">as</span> <span class="nn">uc</span>

<span class="c1"># Initialize the driver</span>
<span class="n">driver</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">Chrome</span><span class="p">()</span>

<span class="c1"># Navigate to a website</span>
<span class="n">driver</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;https://example.com&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Page Title:&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

<span class="c1"># Quit the driver</span>
<span class="n">driver</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="step-3-handle-captcha-and-cloudflare-challenges"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-3-handle-captcha-and-cloudflare-challenges">Step 3: Handle CAPTCHA and Cloudflare Challenges</a></h4>
<ul>
<li>Use <strong>UC</strong> to bypass passive bot checks.</li>
<li>Extract and reuse cookies to maintain session continuity:
  <div class="highlight"><pre><span></span><code><span class="n">cookies</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_cookies</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">add_cookie</span><span class="p">(</span><span class="n">cookies</span><span class="p">)</span>
</code></pre></div></li>
</ul>
<hr />
<h3 id="advanced-automation-workflow-with-cookies"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#advanced-automation-workflow-with-cookies">Advanced Automation Workflow with Cookies</a></h3>
<h4 id="step-1-attempt-standard-automation"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-1-attempt-standard-automation">Step 1: Attempt Standard Automation</a></h4>
<p>Use Selenium with UC to navigate and interact with the website.</p>
<h4 id="step-2-use-cookies-for-session-continuity"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-2-use-cookies-for-session-continuity">Step 2: Use Cookies for Session Continuity</a></h4>
<p>Manually authenticate once, extract cookies, and reuse them for automated sessions:
<div class="highlight"><pre><span></span><code><span class="c1"># Save cookies after manual login</span>
<span class="n">cookies</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">get_cookies</span><span class="p">()</span>

<span class="c1"># Use cookies in future sessions</span>
<span class="k">for</span> <span class="n">cookie</span> <span class="ow">in</span> <span class="n">cookies</span><span class="p">:</span>
    <span class="n">driver</span><span class="o">.</span><span class="n">add_cookie</span><span class="p">(</span><span class="n">cookie</span><span class="p">)</span>
<span class="n">driver</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</code></pre></div></p>
<h4 id="step-3-fall-back-to-manual-assistance"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#step-3-fall-back-to-manual-assistance">Step 3: Fall Back to Manual Assistance</a></h4>
<p>Prompt users to resolve CAPTCHA or login challenges in a separate session and capture the cookies for automation.</p>
<hr />
<h3 id="proposed-workflow-for-automation"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#proposed-workflow-for-automation">Proposed Workflow for Automation</a></h3>
<ol>
<li><strong>Initial Attempt:</strong> Start with Selenium and UC for automation.</li>
<li><strong>Fallback to Cookies:</strong> Reuse cookies for continuity if CAPTCHA or Cloudflare challenges arise.</li>
<li><strong>Manual Assistance:</strong> Open a browser session for user input, capture cookies, and resume automation.</li>
</ol>
<p>This iterative process ensures maximum efficiency and minimizes disruptions.</p>
<hr />
<h3 id="conclusion"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#conclusion">Conclusion</a></h3>
<p>Selenium and undetected-chromedriver provide a powerful toolkit for overcoming automation barriers like CAPTCHA and Cloudflare protections. By leveraging cookies and manual fallbacks, you can create robust workflows that streamline automation processes.</p>
<p>Ready to enhance your web automation? Start integrating Selenium with UC today and unlock new possibilities!</p>
<hr />
<h3 id="references"><a class="toclink" href="2025/01/15/bypassing-cloudflare-with-selenium-and-undetected-chromedriver/#references">References</a></h3>
<ul>
<li><a href="https://www.selenium.dev/documentation/">Selenium Documentation</a></li>
<li><a href="https://github.com/ultrafunkamsterdam/undetected-chromedriver">Undetected-Chromedriver</a></li>
<li><a href="https://www.example.com/captcha-bypass-guide">CAPTCHA Bypass Strategies</a></li>
<li><a href="https://www.cloudflare.com/">Cloudflare and Bot Detection</a></li>
</ul>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <span class="md-pagination__current">1</span> <a class="md-pagination__link" href="page/2/">2</a> <a class="md-pagination__link" href="page/3/">3</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Harminder Singh Nijjar – All rights reserved.

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://discord.gg/nuJfCWCxby" target="_blank" rel="noopener" title="Discord" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485 485 0 0 0 404.081 32.03a1.82 1.82 0 0 0-1.923.91 338 338 0 0 0-14.9 30.6 447.9 447.9 0 0 0-134.426 0 310 310 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.7 483.7 0 0 0-119.688 37.107 1.7 1.7 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.02 2.02 0 0 0 .765 1.375 487.7 487.7 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348 348 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321 321 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251 251 0 0 0 9.109-7.137 1.82 1.82 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.81 1.81 0 0 1 1.924.233 235 235 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.4 301.4 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391 391 0 0 0 30.014 48.815 1.86 1.86 0 0 0 2.063.7A486 486 0 0 0 610.7 405.729a1.88 1.88 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541M222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241m195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.youtube.com/@harmindersinghnijjar" target="_blank" rel="noopener" title="YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/harmindersinghnijjar" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/in/harmindersinghnijjar/" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Cookie consent</h4>
<p>This site uses cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of the documentation and whether users find what they're searching for. With your consent, you're helping me make this website better for everyone.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.path", "navigation.prune", "navigation.indexes", "toc.follow", "navigation.top", "navigation.expand", "search.suggest", "search.share"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>